<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Ethics Cynicism Assessment</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .form-section {
            padding: 40px;
        }
        
        .name-input {
            margin-bottom: 40px;
        }
        
        .name-input label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1em;
        }
        
        .name-input input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
        }
        
        .name-input input:focus {
            outline: none;
            border-color: #4facfe;
        }
        
        .question {
            margin-bottom: 35px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #4facfe;
        }
        
        .question h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.2em;
            line-height: 1.5;
        }
        
        .rating-scale {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            justify-content: space-between;
        }
        
        .rating-option {
            flex: 1;
            min-width: 160px;
            text-align: center;
            position: relative;
        }
        
        .rating-option input {
            display: none;
        }
        
        .rating-option label {
            display: block;
            padding: 15px 8px;
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9em;
            text-align: center;
            line-height: 1.3;
        }
        
        .rating-option input:checked + label {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-color: #4facfe;
            color: white;
            transform: translateY(-2px);
        }
        
        .rating-option label:hover {
            border-color: #4facfe;
            transform: translateY(-1px);
        }
        
        .submit-section {
            text-align: center;
            padding: 40px;
            background: #f8f9fa;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s ease;
            font-weight: 600;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .results {
            display: none;
            padding: 40px;
            text-align: center;
        }
        
        .results h2 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2em;
        }
        
        .score-display {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
            justify-content: center;
        }
        
        .score-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            flex: 1;
            min-width: 250px;
        }
        
        .score-card h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        
        .score-value {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .score-detail {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .download-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px 35px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.3s ease;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e1e5e9;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }
        
        .instructor-panel {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border: 2px solid #4facfe;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-width: 400px;
            max-height: 70vh;
            overflow-y: auto;
            z-index: 1000;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .form-section {
                padding: 30px 20px;
            }
            
            .rating-scale {
                flex-direction: column;
                gap: 8px;
            }
            
            .rating-option {
                min-width: 100%;
            }
            
            .score-display {
                flex-direction: column;
                gap: 20px;
            }
            
            .score-card {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Business Ethics Cynicism Assessment</h1>
            <p>Explore your perspectives on ethics in business and workplace environments</p>
        </div>
        
        <div id="survey-form">
            <div class="form-section">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                
                <div class="name-input">
                    <label for="student-name">Your Full Name *</label>
                    <input type="text" id="student-name" required placeholder="Enter your full name">
                </div>
                
                <form id="disposition-survey">
                    <!-- Business Ethics Questions will be generated here -->
                </form>
                
                <div class="submit-section">
                    <button type="submit" class="submit-btn" id="submit-btn">Complete Assessment</button>
                </div>
            </div>
        </div>
        
        <div id="results" class="results">
            <h2>Assessment Complete!</h2>
            <div class="score-display">
                <div class="score-card">
                    <h3>Your Score</h3>
                    <div class="score-value" id="individual-score">0</div>
                    <div class="score-detail" id="individual-percentage">0% Business Cynicism</div>
                </div>
                <div class="score-card">
                    <h3>Class Average</h3>
                    <div class="score-value" id="class-score">0</div>
                    <div class="score-detail" id="class-percentage">0% Business Cynicism</div>
                </div>
            </div>
            <button class="download-btn" onclick="generatePDF()">üìÑ Download PDF Report</button>
            <button class="download-btn" onclick="generateSimpleReport()">üåê View Report</button>
            <button class="download-btn" onclick="resetSurvey()">üîÑ Take Again</button>
        </div>
    </div>

    <!-- Instructor Panel -->
    <div id="instructor-panel" class="instructor-panel">
        <h3 style="color: #333; margin-bottom: 15px;">üìä Instructor Panel</h3>
        <div id="instructor-stats"></div>
        <button onclick="exportClassData()" style="margin: 10px 5px; padding: 8px 15px; background: #4facfe; color: white; border: none; border-radius: 5px; cursor: pointer;">Export CSV</button>
        <button onclick="clearClassData()" style="margin: 10px 5px; padding: 8px 15px; background: #f5576c; color: white; border: none; border-radius: 5px; cursor: pointer;">Clear Data</button>
        <button onclick="toggleInstructorPanel()" style="margin: 10px 5px; padding: 8px 15px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">Close</button>
    </div>

    <script>
        // Business Ethics Cynicism Questions
        const businessEthicsQuestions = [
            "Most businesses will sacrifice ethical standards to increase profits.",
            "Corporate social responsibility is mainly about improving public image rather than genuine concern.",
            "Business leaders typically prioritize personal wealth over employee welfare.",
            "Companies only follow ethical guidelines when they're legally required to do so.",
            "Most workplace policies are designed to protect the company, not the employees.",
            "Business executives will lie to stakeholders if it helps their bottom line.",
            "In the business world, ethical behavior is seen as a competitive disadvantage.",
            "Companies that claim to be environmentally responsible are usually just greenwashing.",
            "Most managers will take credit for their subordinates' work when it benefits them.",
            "Businesses only treat customers fairly when they fear losing them to competitors.",
            "Workplace discrimination continues because companies only care about avoiding lawsuits.",
            "Most business partnerships are based on mutual exploitation rather than trust.",
            "Companies that advertise their ethical values are often the most unethical behind closed doors.",
            "Business negotiations are fundamentally about deceiving the other party.",
            "Most employees would report unethical behavior only if it personally affected them.",
            "Corporate whistleblowing policies exist mainly to protect the company from liability.",
            "In business, people are promoted based on politics rather than merit.",
            "Most companies would violate worker safety standards if they could avoid getting caught.",
            "Business relationships are maintained only as long as they're mutually profitable.",
            "The primary goal of any business is profit, regardless of the ethical costs."
        ];

        // Global variables
        let responses = [];
        let classData = JSON.parse(localStorage.getItem('classResponses')) || [];

        // Create survey with business ethics questions
        function createSurvey() {
            const form = document.getElementById('disposition-survey');
            form.innerHTML = '';
            
            businessEthicsQuestions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                const questionTitle = document.createElement('h3');
                questionTitle.textContent = `${index + 1}. ${question}`;
                questionDiv.appendChild(questionTitle);
                
                const ratingScale = document.createElement('div');
                ratingScale.className = 'rating-scale';
                
                const ratingOptions = [
                    { value: 1, text: '1 - Strongly Disagree' },
                    { value: 2, text: '2 - Disagree' },
                    { value: 3, text: '3 - Neutral' },
                    { value: 4, text: '4 - Agree' },
                    { value: 5, text: '5 - Strongly Agree' }
                ];
                
                ratingOptions.forEach(option => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'rating-option';
                    
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.id = `q${index}_${option.value}`;
                    input.name = `question_${index}`;
                    input.value = option.value;
                    input.required = true;
                    
                    const label = document.createElement('label');
                    label.setAttribute('for', `q${index}_${option.value}`);
                    label.textContent = option.text;
                    
                    optionDiv.appendChild(input);
                    optionDiv.appendChild(label);
                    ratingScale.appendChild(optionDiv);
                });
                
                questionDiv.appendChild(ratingScale);
                form.appendChild(questionDiv);
            });
        }

        // Update progress bar
        function updateProgress() {
            const totalQuestions = businessEthicsQuestions.length;
            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            const nameInput = document.getElementById('student-name');
            
            const progress = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            
            const submitBtn = document.getElementById('submit-btn');
            const canSubmit = answeredQuestions === totalQuestions && nameInput.value.trim().length > 0;
            
            submitBtn.disabled = !canSubmit;
            submitBtn.style.opacity = canSubmit ? '1' : '0.6';
        }

        // Handle form submission
        function handleSubmission(e) {
            e.preventDefault();
            
            const name = document.getElementById('student-name').value.trim();
            if (!name) {
                alert('Please enter your name.');
                return;
            }
            
            responses = [];
            let totalScore = 0;
            
            for (let i = 0; i < businessEthicsQuestions.length; i++) {
                const checkedInput = document.querySelector(`input[name="question_${i}"]:checked`);
                if (!checkedInput) {
                    alert(`Please answer question ${i + 1}.`);
                    return;
                }
                
                const score = parseInt(checkedInput.value);
                responses.push({
                    question: businessEthicsQuestions[i],
                    score: score
                });
                totalScore += score;
            }
            
            const studentData = {
                name: name,
                responses: responses,
                totalScore: totalScore,
                date: new Date().toISOString()
            };
            
            classData.push(studentData);
            localStorage.setItem('classResponses', JSON.stringify(classData));
            
            showResults(studentData);
            updateInstructorStats();
        }

        // Show results
        function showResults(studentData) {
            const maxScore = businessEthicsQuestions.length * 5;
            const studentPercentage = Math.round((studentData.totalScore / maxScore) * 100);
            
            const classAverage = classData.reduce((sum, student) => sum + student.totalScore, 0) / classData.length;
            const classPercentage = Math.round((classAverage / maxScore) * 100);
            
            document.getElementById('individual-score').textContent = studentData.totalScore;
            document.getElementById('individual-percentage').textContent = studentPercentage + '% Business Cynicism';
            document.getElementById('class-score').textContent = Math.round(classAverage);
            document.getElementById('class-percentage').textContent = classPercentage + '% Business Cynicism';
            
            window.currentResults = {
                individual: studentData,
                class: { average: classAverage, percentage: classPercentage, count: classData.length }
            };
            
            document.getElementById('survey-form').style.display = 'none';
            document.getElementById('results').style.display = 'block';
        }

        // Generate PDF Report
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const results = window.currentResults;
            const maxScore = businessEthicsQuestions.length * 5;
            
            // Header
            doc.setFillColor(79, 172, 254);
            doc.rect(0, 0, 210, 40, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(18);
            doc.text('Business Ethics Cynicism Assessment Report', 105, 25, { align: 'center' });
            
            // Reset text color
            doc.setTextColor(0, 0, 0);
            
            // Student info
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('STUDENT INFORMATION', 20, 55);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text('Name: ' + results.individual.name, 20, 68);
            doc.text('Date: ' + new Date().toLocaleDateString(), 20, 76);
            doc.text('Class Participants: ' + classData.length, 20, 84);
            
            // Results
            const individualPercentage = Math.round((results.individual.totalScore / maxScore) * 100);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('ASSESSMENT RESULTS', 20, 100);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text(`Your Score: ${results.individual.totalScore}/${maxScore} (${individualPercentage}%)`, 20, 113);
            doc.text(`Class Average: ${Math.round(results.class.average)}/${maxScore} (${results.class.percentage}%)`, 20, 121);
            
            // Interpretation
            doc.setFont(undefined, 'bold');
            doc.text('INTERPRETATION', 20, 140);
            doc.setFont(undefined, 'normal');
            
            let interpretation = '';
            if (individualPercentage <= 30) {
                interpretation = 'Optimistic Business Perspective: You tend to have faith in business ethics.';
            } else if (individualPercentage <= 50) {
                interpretation = 'Balanced Business Viewpoint: You have measured views about business ethics.';
            } else if (individualPercentage <= 70) {
                interpretation = 'Skeptical Business Outlook: You tend to be cautious about business ethics.';
            } else {
                interpretation = 'Highly Cynical Business Perspective: You hold strong doubts about business ethics.';
            }
            
            const interpretationLines = doc.splitTextToSize(interpretation, 170);
            doc.text(interpretationLines, 20, 155);
            
            // Add question breakdown
            doc.addPage();
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('QUESTION-BY-QUESTION BREAKDOWN', 20, 20);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(9);
            
            let yPos = 35;
            results.individual.responses.forEach((response, index) => {
                if (yPos > 260) {
                    doc.addPage();
                    yPos = 20;
                }
                
                const responseText = ['Strongly Disagree', 'Disagree', 'Neutral', 'Agree', 'Strongly Agree'][response.score - 1];
                
                doc.setFont(undefined, 'bold');
                doc.text(`Q${index + 1}: ${response.question.substring(0, 70)}...`, 20, yPos);
                doc.setFont(undefined, 'normal');
                yPos += 6;
                doc.text(`Your Response: ${response.score}/5 (${responseText})`, 20, yPos);
                yPos += 10;
            });
            
            doc.save(`${results.individual.name.replace(/[^a-zA-Z0-9]/g, '_')}_Business_Ethics_Report.pdf`);
        }

        // Generate Simple HTML Report
        function generateSimpleReport() {
            const results = window.currentResults;
            const maxScore = businessEthicsQuestions.length * 5;
            const individualPercentage = Math.round((results.individual.totalScore / maxScore) * 100);
            
            let interpretation = '';
            if (individualPercentage <= 30) {
                interpretation = 'Optimistic Business Perspective: You have faith in business ethics.';
            } else if (individualPercentage <= 50) {
                interpretation = 'Balanced Business Viewpoint: You have measured views about business ethics.';
            } else if (individualPercentage <= 70) {
                interpretation = 'Skeptical Business Outlook: You are cautious about business ethics.';
            } else {
                interpretation = 'Highly Cynical Business Perspective: You doubt business ethics practices.';
            }
            
            const htmlContent = `<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Business Ethics Report</title>
<style>body{font-family:Arial,sans-serif;max-width:800px;margin:0 auto;padding:20px;background:#f8f9fa}
.header{background:linear-gradient(135deg,#4facfe,#00f2fe);color:white;padding:30px;border-radius:10px;text-align:center;margin-bottom:30px}
.section{background:white;padding:25px;border-radius:10px;margin-bottom:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
.score-card{background:linear-gradient(135deg,#f093fb,#f5576c);color:white;padding:20px;border-radius:10px;text-align:center;margin:20px 0}
.question-item{background:#f8f9fa;padding:15px;margin:10px 0;border-radius:5px;border-left:4px solid #4facfe}
h1,h2,h3{color:#333}.print-btn{background:#4facfe;color:white;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:16px;margin:10px 5px}
@media print{.print-btn{display:none}body{background:white}}</style>
</head><body>
<div class="header"><h1>Business Ethics Assessment Report</h1><p>Your Results and Analysis</p></div>
<div class="section"><h2>Student Information</h2><p><strong>Name:</strong> ${results.individual.name}</p>
<p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p><p><strong>Class Size:</strong> ${classData.length} students</p></div>
<div class="score-card"><h2>Your Results</h2><div style="font-size:2em;font-weight:bold">${results.individual.totalScore}/${maxScore}</div>
<div style="font-size:1.2em">${individualPercentage}% Business Cynicism</div></div>
<div class="section"><h2>Class Comparison</h2><p><strong>Your Score:</strong> ${results.individual.totalScore}/${maxScore} (${individualPercentage}%)</p>
<p><strong>Class Average:</strong> ${Math.round(results.class.average)}/${maxScore} (${results.class.percentage}%)</p></div>
<div class="section"><h2>Interpretation</h2><p>${interpretation}</p></div>
<div class="section"><h2>Your Question Responses</h2>
${results.individual.responses.map((response, index) => `
<div class="question-item"><h4>Question ${index + 1}</h4><p>${response.question}</p>
<p><strong>Your Response:</strong> ${response.score}/5 (${['Strongly Disagree', 'Disagree', 'Neutral', 'Agree', 'Strongly Agree'][response.score - 1]})</p></div>
`).join('')}</div>
<div class="section" style="text-align:center"><button class="print-btn" onclick="window.print()">üñ®Ô∏è Print Report</button>
<button class="print-btn" onclick="window.close()">‚ùå Close</button></div></body></html>`;
            
            const reportWindow = window.open('', '_blank', 'width=900,height=700,scrollbars=yes');
            if (reportWindow) {
                reportWindow.document.write(htmlContent);
                reportWindow.document.close();
                reportWindow.focus();
            } else {
                alert('Please allow popups to view the report.');
            }
        }

        // Reset survey
        function resetSurvey() {
            document.getElementById('results').style.display = 'none';
            document.getElementById('survey-form').style.display = 'block';
            document.getElementById('disposition-survey').reset();
            document.getElementById('student-name').value = '';
            document.getElementById('progress-fill').style.width = '0%';
            updateProgress();
        }

        // Instructor functions
        function updateInstructorStats() {
            const statsDiv = document.getElementById('instructor-stats');
            const totalResponses = classData.length;
            
            if (totalResponses === 0) {
                statsDiv.innerHTML = '<p>No responses yet.</p>';
                console.log('=== BUSINESS ETHICS CLASS STATISTICS ===');
                console.log('Total Responses: 0');
                return;
            }
            
            const maxScore = businessEthicsQuestions.length * 5;
            const avgScore = classData.reduce((sum, student) => sum + student.totalScore, 0) / totalResponses;
            const avgPercentage = Math.round((avgScore / maxScore) * 100);
            
            statsDiv.innerHTML = `
                <p><strong>Total Responses:</strong> ${totalResponses}</p>
                <p><strong>Class Average:</strong> ${avgScore.toFixed(1)}/${maxScore} (${avgPercentage}%)</p>
                <div style="max-height: 200px; overflow-y: auto; margin-top: 10px;">
                    <table style="width: 100%; font-size: 0.9em;">
                        <thead><tr style="background: #f0f0f0;"><th style="padding: 5px;">Name</th><th style="padding: 5px;">Score</th><th style="padding: 5px;">%</th></tr></thead>
                        <tbody>${classData.map(student => {
                            const percentage = Math.round((student.totalScore / maxScore) * 100);
                            return `<tr><td style="padding: 5px;">${student.name}</td><td style="padding: 5px; text-align: center;">${student.totalScore}</td><td style="padding: 5px; text-align: center;">${percentage}%</td></tr>`;
                        }).join('')}</tbody>
                    </table>
                </div>
            `;
            
            console.log('=== BUSINESS ETHICS CLASS STATISTICS ===');
            console.log(`Total Responses: ${totalResponses}`);
            console.log(`Average Score: ${avgScore.toFixed(1)}/${maxScore} (${avgPercentage}%)`);
        }

        function toggleInstructorPanel() {
            const panel = document.getElementById('instructor-panel');
            if (panel.style.display === 'none' || panel.style.display === '') {
                panel.style.display = 'block';
                updateInstructorStats();
            } else {
                panel.style.display = 'none';
            }
        }

        function exportClassData() {
            if (classData.length === 0) {
                alert('No data to export yet.');
                return;
            }
            
            let csv = 'Name,Score,Percentage,Date,Individual Responses\n';
            classData.forEach(student => {
                const maxScore = businessEthicsQuestions.length * 5;
                const percentage = Math.round((student.totalScore / maxScore) * 100);
                const responseString = student.responses.map(r => r.score).join('|');
                csv += `"${student.name}",${student.totalScore},${percentage}%,"${new Date(student.date).toLocaleDateString()}","${responseString}"\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `business_ethics_cynicism_data_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function clearClassData() {
            if (confirm('Are you sure you want to clear all class data? This action cannot be undone.')) {
                localStorage.removeItem('classResponses');
                classData = [];
                updateInstructorStats();
                alert('Class data cleared successfully.');
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing Business Ethics Cynicism Assessment...');
            createSurvey();
            updateProgress();
            updateInstructorStats();
            
            // Form submission handlers
            document.getElementById('disposition-survey').addEventListener('submit', handleSubmission);
            document.getElementById('submit-btn').addEventListener('click', handleSubmission);
            
            // Progress tracking
            document.addEventListener('change', function(e) {
                if (e.target.type === 'radio') {
                    updateProgress();
                }
            });
            
            document.getElementById('student-name').addEventListener('input', updateProgress);
            
            // Instructor panel keyboard shortcut (Ctrl+Shift+I)
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.shiftKey && e.key === 'I') {
                    e.preventDefault();
                    toggleInstructorPanel();
                }
            });
            
            console.log('Assessment initialization complete - All 20 business ethics questions loaded!');
        });
    </script>
</body>
</html>
